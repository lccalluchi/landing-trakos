---
import WidgetWrapper from '../../components/ui/WidgetWrapper.astro';
import Headline from '../../components/ui/Headline.astro';
import { Icon } from 'astro-icon/components';
import Button from '../../components/ui/Button.astro';

const {
  title = 'Planes Trakos',
  subtitle = 'Comienza a transformar tu gestión operativa hoy mismo con nuestro plan diseñado para empresas de todos los tamaños',
  tagline = 'Precios transparentes',
  id,
  isDark = false,
  classes = {},
  bg = undefined,
} = Astro.props;

const plans = [
  {
    name: 'Trakos Business',
    price: '1,500',
    period: 'por mes',
    description: 'Suscripción mensual con acceso completo a todas las funcionalidades',
    features: [
      'Usuarios ilimitados',
      'Acceso a todas las funcionalidades',
      'Reportes automáticos diarios',
      'Datos en tiempo real desde el campo',
      'Integración con sistemas existentes',
      'Soporte técnico 24/7',
      'Actualizaciones continuas',
      'Capacitación para tu equipo'
    ],
    isPopular: true,
    buttonText: 'Comenzar ahora',
    buttonVariant: 'primary',
    icon: 'tabler:rocket'
  },
  {
    name: 'Plan Personalizado',
    price: 'Consultar',
    period: 'precio especial',
    description: 'Para empresas con necesidades específicas o que requieren integraciones a medida',
    features: [
      'Todas las características de Business',
      'Integraciones personalizadas',
      'Desarrollo de módulos a medida',
      'Consultoría estratégica',
      'Implementación guiada',
      'Soporte VIP',
      'Acuerdo de nivel de servicio (SLA)',
      'Capacitación avanzada'
    ],
    isPopular: false,
    buttonText: 'Contáctanos',
    buttonVariant: 'secondary',
    icon: 'tabler:building'
  },
  {
    name: 'Enterprise',
    price: 'Personalizado',
    period: '',
    description: 'Solución a medida para grandes empresas con necesidades específicas',
    features: [
      'Usuarios ilimitados',
      'Almacenamiento ilimitado',
      'Visualización de datos premium',
      'Integraciones personalizadas',
      'Soporte dedicado 24/7',
      'Análisis de IA avanzado',
      'Seguridad de nivel empresarial',
      'Implementación personalizada',
      'SLA garantizado'
    ],
    isPopular: false,
    buttonText: 'Contactar ventas',
    buttonVariant: 'secondary',
    icon: 'tabler:building-skyscraper'
  }
];
---

<WidgetWrapper id={id} isDark={isDark} containerClass={`max-w-7xl mx-auto ${classes?.container ?? ''}`} bg={bg}>
  <Headline
    title={title}
    subtitle={subtitle}
    tagline={tagline}
    classes={{
      container: 'max-w-xl sm:mx-auto lg:max-w-2xl mb-12',
      title: 'text-4xl md:text-5xl font-bold tracking-tighter mb-4 font-heading text-primary dark:text-primary',
      subtitle: 'max-w-3xl mx-auto sm:text-center text-xl text-secondary dark:text-accent',
    }}
  />
  
  <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
    {plans.map((plan) => (
      <div class={`pricing-card relative overflow-hidden rounded-2xl border ${plan.isPopular ? 'border-primary shadow-lg shadow-primary/10' : 'border-gray-200 dark:border-gray-700'} bg-white p-6 transition-all duration-300 hover:shadow-xl dark:bg-gray-800`}>
        {plan.isPopular && (
          <div class="absolute -right-12 top-6 rotate-45 bg-primary px-10 py-1 text-xs font-semibold text-white">Popular</div>
        )}
        
        <div class="mb-6 flex items-center">
          <div class={`mr-4 flex h-12 w-12 items-center justify-center rounded-full ${plan.isPopular ? 'bg-primary' : 'bg-accent'} text-white`}>
            <Icon name={plan.icon} class="h-6 w-6" />
          </div>
          <h3 class="text-2xl font-bold text-gray-900 dark:text-white">{plan.name}</h3>
        </div>
        
        <div class="mb-6">
          <div class="flex items-end">
            <span class="text-4xl font-bold text-primary dark:text-primary">{plan.price.startsWith('Personalizado') ? '' : '€'}{plan.price}</span>
            {plan.period && <span class="ml-1 text-gray-600 dark:text-gray-400">{plan.period}</span>}
          </div>
          <p class="mt-2 text-gray-600 dark:text-gray-400">{plan.description}</p>
        </div>
        
        <ul class="mb-8 space-y-3">
          {plan.features.map((feature) => (
            <li class="flex items-center">
              <Icon name="tabler:check" class="mr-2 h-5 w-5 text-primary" />
              <span class="text-gray-700 dark:text-gray-300">{feature}</span>
            </li>
          ))}
        </ul>
        
        <div class="mt-auto">
          <Button
            variant={plan.buttonVariant}
            text={plan.buttonText}
            class={`w-full ${plan.isPopular ? 'shadow-lg shadow-primary/30' : ''}`}
          />
        </div>
      </div>
    ))}
  </div>
  
  <div class="mt-12 text-center">
    <p class="text-gray-600 dark:text-gray-400">¿Necesitas un plan personalizado? <a href="#contacto" class="font-medium text-primary hover:underline">Contáctanos</a> para discutir tus necesidades específicas.</p>
  </div>
</WidgetWrapper>

<style>
  .pricing-card {
    display: flex;
    flex-direction: column;
    height: 100%;
  }
  
  .pricing-card:hover {
    transform: translateY(-5px);
  }
</style>
