---
import { Icon } from 'astro-icon/components';
import Button from '../../components/ui/Button.astro';
import Headline from '../../components/ui/Headline.astro';
import WidgetWrapper from '../../components/ui/WidgetWrapper.astro';

const {
  title = 'Planes Trakos',
  subtitle = 'Comienza a transformar tu gestión operativa hoy mismo',
  tagline = 'Precios transparentes',
  id,
  isDark = false,
  classes = {},
  bg = undefined,
} = Astro.props;

// Plan único para la oferta de lanzamiento
const plans = [
  {
    name: 'Plan Estándar Anual',
    price: '37',
    period: 'por año',
    description: 'Inteligencia operativa completa - Oferta de lanzamiento limitada',
    features: [
      'Hasta 100 Trabajadores',
      '1,000 Créditos de IA',
      'Recargas Flexibles',
      'Datos en tiempo real',
      'Análisis predictivo',
      'Soporte técnico 24/7',
      'Actualizaciones continuas',
      'Sin costos ocultos',
    ],
    isPopular: true,
    buttonText: 'Asegura tu Plan Ahora',
    buttonVariant: 'primary',
    icon: 'tabler:rocket',
  },
];
---

<WidgetWrapper id={id} isDark={isDark} containerClass={`max-w-4xl mx-auto ${classes?.container ?? ''}`} bg={bg}>
  <Headline
    title={title}
    subtitle={subtitle}
    tagline={tagline}
    classes={{
      container: 'max-w-xl sm:mx-auto lg:max-w-2xl mb-12',
      title: 'text-4xl md:text-5xl font-bold tracking-tighter mb-4 font-heading text-primary dark:text-primary',
      subtitle: 'max-w-3xl mx-auto sm:text-center text-xl text-secondary dark:text-accent',
    }}
  />

  <!-- Grid centrado para un solo plan -->
  <div class="flex justify-center">
    <div class="w-full max-w-md">
      {
        plans.map((plan) => (
          <div
            class={`pricing-card relative overflow-hidden rounded-2xl border border-primary shadow-lg shadow-primary/10 bg-white p-8 transition-all duration-300 hover:shadow-xl dark:bg-gray-800`}
          >
            <div class="absolute -right-12 top-6 rotate-45 bg-primary px-10 py-1 text-xs font-semibold text-white">
              Lanzamiento
            </div>

            <div class="mb-6 flex items-center justify-center">
              <div class="mr-4 flex h-16 w-16 items-center justify-center rounded-full bg-primary text-white">
                <Icon name={plan.icon} class="h-8 w-8" />
              </div>
            </div>

            <div class="text-center mb-6">
              <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-2">{plan.name}</h3>
              <div class="flex items-end justify-center mb-2">
                <span class="text-5xl font-bold text-primary dark:text-primary">$</span>
                <span class="text-6xl font-bold text-primary dark:text-primary">{plan.price}</span>
              </div>
              <span class="text-gray-600 dark:text-gray-400">{plan.period}</span>
              <p class="mt-4 text-gray-600 dark:text-gray-400">{plan.description}</p>
            </div>

            <ul class="mb-8 space-y-4">
              {plan.features.map((feature) => (
                <li class="flex items-center">
                  <Icon name="tabler:check" class="mr-3 h-5 w-5 text-primary" />
                  <span class="text-gray-700 dark:text-gray-300">{feature}</span>
                </li>
              ))}
            </ul>

            <div class="mt-auto">
              <Button
                variant={plan.buttonVariant}
                text={plan.buttonText}
                class="w-full shadow-lg shadow-primary/30"
                href="#"
              />
            </div>
          </div>
        ))
      }
    </div>
  </div>

  <div class="mt-12 text-center">
    <p class="text-gray-600 dark:text-gray-400">
      ¿Tienes preguntas? <a href="#contacto" class="font-medium text-primary hover:underline">Contáctanos</a> para más información.
    </p>
  </div>
</WidgetWrapper>

<style>
  .pricing-card {
    display: flex;
    flex-direction: column;
    height: 100%;
  }

  .pricing-card:hover {
    transform: translateY(-5px);
  }
</style>
